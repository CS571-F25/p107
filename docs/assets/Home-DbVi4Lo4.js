import{j as e,b as k,R as j,c as p,g as N,a as b,S,A as C}from"./vendor-bootstrap-C6xIMti8.js";import{r as t,f as w}from"./vendor-router-DArSVHJ3.js";import{L as P,e as v,s as E,r as z}from"./auth-Sw-QPVcd.js";import{u as A,A as V,b as R,g as B,B as L}from"./blog-CaqybC2x.js";import"./vendor-react-Bzgz95E1.js";import"./vendor-firebase-CYcY3q11.js";function H(){const h=t.useContext(P),[c,f]=t.useState(!1),[o,d]=t.useState(!1),[l,r]=t.useState(""),[x,i]=t.useState(!1),[m,n]=t.useState(!1);if(t.useEffect(()=>{i(v())},[h.user]),!h.isLoggedIn||x)return null;const u=async()=>{f(!0),r(""),d(!1);try{await E(),d(!0),setTimeout(()=>d(!1),6e4)}catch(s){r(s.message||"Failed to send verification email.")}finally{f(!1)}},g=async()=>{n(!0),r("");try{await z();const s=v();i(s),s||r("Email not verified yet. Please check your inbox and click the verification link.")}catch(s){r(s.message||"Failed to check verification status.")}finally{n(!1)}};return e.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1.5px solid #ffc107",borderRadius:4,padding:12,marginBottom:16},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:12},children:[e.jsx("span",{style:{fontSize:24},children:"âš ï¸"}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h4",{style:{margin:"0 0 8px 0",color:"#666",fontSize:18},children:"Email Not Verified"}),e.jsx("p",{style:{margin:"0 0 12px 0",color:"#666"},children:"Please verify your email address to access all features. Check your inbox for the verification link."}),o&&e.jsx("div",{style:{color:"green",marginBottom:12,padding:8,backgroundColor:"#d4edda",border:"1px solid #c3e6cb",borderRadius:4,fontSize:14},children:"âœ“ Verification email sent! Check your inbox (and spam folder)."}),l&&e.jsx("div",{style:{color:"crimson",marginBottom:12,padding:8,backgroundColor:"#f8d7da",border:"1px solid #f5c6cb",borderRadius:4,fontSize:14},children:l}),e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[e.jsx("p",{style:{margin:"0 0 0 0",fontSize:13,color:"#666",fontStyle:"italic"},children:"ðŸ’¡ Tip: Check your spam folder if you don't see the email."}),e.jsx("button",{onClick:u,disabled:c||o,style:{padding:"8px 16px",fontSize:14,backgroundColor:o?"#28a745":c?"#ccc":"#007bff",color:"white",border:"none",borderRadius:4,cursor:c||o?"not-allowed":"pointer"},children:c?"Sending...":o?"âœ“ Sent":"Resend Verification Email"}),e.jsx("button",{onClick:g,disabled:m,style:{padding:"8px 16px",fontSize:14,backgroundColor:m?"#ccc":"#6c757d",color:"white",border:"none",borderRadius:4,cursor:m?"not-allowed":"pointer"},children:m?"Checking...":"I've Verified"})]})]})]})})}function $(){const[h,c]=t.useState([]),[f,o]=t.useState(!0),[d,l]=t.useState(""),[r,x]=w(),[i,m]=t.useState(r.get("view")||"published"),{canAccessAdmin:n}=A();t.useEffect(()=>{(async()=>{try{o(!0),console.log("Fetching posts with view mode:",i);const y=await B(12,{status:i==="all"?"all":"published-only"});console.log("Posts fetched successfully:",y),c(y),l("")}catch(a){console.error("Error fetching posts:",a),console.error("Error code:",a.code),console.error("Error message:",a.message),a.code==="unavailable"||a.message.includes("network")||a.message.includes("connection")?l("Unable to connect to the blog service. Please check your internet connection and try again."):a.code==="permission-denied"?l("Access denied. Please check your permissions."):l(`Experiencing technical difficulties loading posts: ${a.message||a.code||"Unknown error"}. Please try refreshing the page.`)}finally{o(!1)}})()},[i]);const u=s=>{m(s),s==="published"?r.delete("view"):r.set("view",s),x(r)},g=()=>{if(f)return e.jsxs("div",{className:"text-center py-5",children:[e.jsx(S,{animation:"border",variant:"primary"}),e.jsx("p",{className:"mt-2 text-muted",children:"Loading posts..."})]});if(d)return e.jsx(C,{variant:"danger",className:"text-center",children:d});if(h.length===0){const s=i==="all"&&n?"No posts found (including drafts). Create your first post to get started!":i==="published"?"No published posts yet. Stay tuned for upcoming content!":"No posts available at the moment.";return e.jsxs("div",{className:"py-5",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h2",{className:"mb-3",style:{fontWeight:"600"},children:"Welcome to Orient Way"}),e.jsxs("p",{className:"text-muted mb-4",style:{fontSize:"1.1rem",lineHeight:"1.6"},children:["This is where I document my journeys, both physical and digital.",e.jsx("br",{}),"Stories from the road, lessons from code, and everything in between."]}),e.jsxs("div",{className:`alert border-0 ${n?"alert-warning":"alert-info"}`,style:{backgroundColor:n?"rgba(255, 193, 7, 0.1)":"rgba(13, 202, 240, 0.1)"},children:[e.jsx("i",{className:`bi ${n?"bi-exclamation-triangle":"bi-info-circle"} me-2`}),e.jsx("strong",{children:s}),n&&e.jsx("div",{className:"mt-2",children:e.jsx(b,{variant:"outline-primary",size:"sm",onClick:()=>window.location.href="#/admin/create-post",children:"Create First Post"})})]}),!n&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mt-4 p-3 rounded",style:{backgroundColor:"rgba(0,0,0,0.02)"},children:[e.jsx("h6",{className:"text-muted mb-3",children:"âœ¨ Link Style Preview:"}),e.jsxs("div",{style:{fontSize:"0.9rem",lineHeight:"1.6"},children:[e.jsxs("p",{className:"mb-2",children:["Sample story: I ",e.jsx("a",{href:"#",className:"theme-link link-blue",children:"raised funding"})," for my startup, then ",e.jsx("a",{href:"#",className:"theme-link link-teal",children:"walked"})," across the continent,",e.jsx("a",{href:"#",className:"theme-link link-red",children:"lived in South America"})," for months, and ",e.jsx("a",{href:"#",className:"theme-link link-brown",children:"became employee #1"})," at a YC company."]}),e.jsx("small",{className:"text-muted",children:'Hover over the colored links to see the "marker highlight" effect! ðŸ–ï¸'})]})]})})]}),e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"border rounded p-4 h-100 d-flex flex-column justify-content-center text-center",style:{backgroundColor:"rgba(13, 110, 253, 0.05)",borderColor:"rgba(13, 110, 253, 0.2)",minHeight:"200px"},children:[e.jsx("i",{className:"bi bi-map text-primary mb-3",style:{fontSize:"2.5rem"}}),e.jsx("h5",{className:"text-primary mb-2",children:"Travel Stories"}),e.jsx("p",{className:"text-muted small mb-0",children:"Tales from 1,700 miles of walking and months in South America"})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"border rounded p-4 h-100 d-flex flex-column justify-content-center text-center",style:{backgroundColor:"rgba(255, 107, 53, 0.05)",borderColor:"rgba(255, 107, 53, 0.2)",minHeight:"200px"},children:[e.jsx("i",{className:"bi bi-code-slash mb-3",style:{fontSize:"2.5rem",color:"#ff6b35"}}),e.jsx("h5",{className:"mb-2",style:{color:"#ff6b35"},children:"Tech Insights"}),e.jsx("p",{className:"text-muted small mb-0",children:"Lessons from building at a YC startup and beyond"})]})})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("small",{className:"text-muted",children:"Check back soon for the first adventure stories! ðŸš€"})})]})}return e.jsx(j,{className:"g-4",children:h.map(s=>e.jsx(p,{md:6,lg:6,children:e.jsx(L,{post:s})},s.id))})};return e.jsxs(k,{fluid:!0,style:{maxWidth:"1200px",padding:"1rem"},children:[e.jsx(H,{}),e.jsxs(j,{className:"g-4",children:[e.jsx(p,{lg:4,xl:3,children:e.jsx(V,{})}),e.jsxs(p,{lg:8,xl:9,children:[e.jsx(R,{children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsx("h4",{className:"mb-0",children:"Blog Posts"}),e.jsxs(N,{size:"sm",children:[e.jsx(b,{variant:i==="published"?"primary":"outline-primary",onClick:()=>u("published"),children:"Published"}),e.jsx(b,{variant:i==="all"?"primary":"outline-primary",onClick:()=>u("all"),children:"All"})]})]})}),g()]})]})]})}export{$ as default};
