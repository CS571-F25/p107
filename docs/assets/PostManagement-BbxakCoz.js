import{j as e,A as S,F as D,a as o,h as C,D as r,g as A,M as l,B as T}from"./vendor-bootstrap-D2eqalZl.js";import{r as s}from"./vendor-router-CUyV5JBb.js";import{T as N,u as k,g as B,p as F,i as E,k as M}from"./blog-BQPs9klV.js";import"./vendor-react-Bzgz95E1.js";import"./auth-DdQ2LLef.js";import"./vendor-firebase-CYcY3q11.js";function J(){const[x,g]=s.useState([]),[v,j]=s.useState(!0),[f,d]=s.useState(""),[a,y]=s.useState("all"),[$,L]=s.useState([]),[b,i]=s.useState(!1),[c,m]=s.useState(null),{theme:U}=s.useContext(N);k(),s.useEffect(()=>{h()},[a]);const h=async()=>{try{j(!0);const t=await B(100,{status:"all"});let n=t;a!=="all"&&(n=t.filter(u=>u.status===a)),g(n)}catch(t){d("Failed to load posts"),console.error("Error fetching posts:",t)}finally{j(!1)}},p=async(t,n)=>{try{n==="published"?await F(t):await E(t),h()}catch(u){d(`Failed to update post status: ${u.message}`)}},P=async()=>{if(c)try{await M(c.id),i(!1),m(null),h()}catch(t){d(`Failed to delete post: ${t.message}`)}},w=t=>{const n={published:"success",draft:"warning",archived:"secondary"};return e.jsx(T,{bg:n[t]||"secondary",children:t})};return v?e.jsx("div",{className:"text-center p-4",children:"Loading posts..."}):e.jsxs("div",{children:[f&&e.jsx(S,{variant:"danger",children:f}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsxs(D.Select,{value:a,onChange:t=>y(t.target.value),style:{width:"200px"},children:[e.jsx("option",{value:"all",children:"All Posts"}),e.jsx("option",{value:"published",children:"Published"}),e.jsx("option",{value:"draft",children:"Drafts"}),e.jsx("option",{value:"archived",children:"Archived"})]}),e.jsx(o,{variant:"primary",href:"#/editor/new",children:"New Article"})]}),e.jsxs(C,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Title"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Author"}),e.jsx("th",{children:"Created"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:x.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"text-center text-muted",children:a==="all"?"No articles found":`No ${a} articles`})}):x.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("a",{href:`#/blog/${t.slug}`,className:"text-decoration-none",children:t.title})}),e.jsx("td",{children:w(t.status)}),e.jsx("td",{children:t.author||"Unknown"}),e.jsx("td",{children:new Date(t.createdAt?.seconds*1e3).toLocaleDateString()}),e.jsx("td",{children:e.jsxs(r,{as:A,children:[e.jsx(o,{variant:"outline-primary",size:"sm",href:`#/editor/${t.id}`,children:"Edit"}),e.jsx(r.Toggle,{split:!0,variant:"outline-primary",size:"sm"}),e.jsxs(r.Menu,{children:[t.status==="draft"&&e.jsx(r.Item,{onClick:()=>p(t.id,"published"),children:"Publish"}),t.status==="published"&&e.jsx(r.Item,{onClick:()=>p(t.id,"draft"),children:"Unpublish"}),e.jsx(r.Divider,{}),e.jsx(r.Item,{className:"text-danger",onClick:()=>{m(t),i(!0)},children:"Delete"})]})]})})]},t.id))})]}),e.jsxs(l,{show:b,onHide:()=>i(!1),children:[e.jsx(l.Header,{closeButton:!0,children:e.jsx(l.Title,{children:"Confirm Delete"})}),e.jsxs(l.Body,{children:['Are you sure you want to delete "',c?.title,'"? This action cannot be undone.']}),e.jsxs(l.Footer,{children:[e.jsx(o,{variant:"secondary",onClick:()=>i(!1),children:"Cancel"}),e.jsx(o,{variant:"danger",onClick:P,children:"Delete"})]})]})]})}export{J as default};
