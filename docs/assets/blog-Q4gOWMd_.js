import{j as e,C as y,B as L,a as P,S as H,A as I,b as w,R as q,c as B}from"./vendor-bootstrap-Dg_DQlAt.js";import{r as h,L as _,b as F,u as O}from"./vendor-router-DblBPfa5.js";import{q as R,f as A,w as $,h as U,j as Y,k as G,l as X,m as Z,n as D}from"./vendor-firebase-CynBMA2D.js";import{d as S}from"./auth-DEfQYUln.js";const T=h.createContext();function ae({children:i}){const[r,s]=h.useState(localStorage.getItem("theme")||"light");h.useEffect(()=>{localStorage.setItem("theme",r),document.documentElement.setAttribute("data-bs-theme",r)},[r]);const t=()=>{const d=r==="dark"?"light":"dark";s(d),localStorage.setItem("theme",d)},o=h.useMemo(()=>({theme:r,toggleTheme:t}),[r]);return e.jsx(T.Provider,{value:o,children:i})}function J(){const{theme:i}=h.useContext(T),r=[{text:"raised",description:" by West Lake in Hangzhou",linkClass:"theme-link link-blue",id:"raised"},{text:"learned to orienteer",description:" in high school",linkClass:"theme-link link-teal",id:"orienteer"},{text:"solo cycled",description:" around Taiwan and topped the highest road in SE Asia",linkClass:"theme-link link-red",id:"taiwan-ride"},{text:"bikepacked",description:" from the Midwest to the Pacific",linkClass:"theme-link link-brown",id:"backpacking"},{text:"now",description:" studying in Madison",linkClass:"theme-link link-blue",id:"madison"}],s={github:"https://github.com/eliotziqi",linkedin:"https://www.linkedin.com/in/zzhu-eliot/",twitter:"https://x.com/EliotOrientWay",email:"mailto:zhu.ziqi@foxmail.com"};return e.jsxs("div",{className:"sticky-top",style:{top:"2rem"},children:[e.jsx("div",{className:"mb-4 pb-4 title-hover-group",style:{position:"relative"},onMouseEnter:t=>{const o=t.currentTarget.querySelector(".title-tooltip");o&&(o.style.opacity="1")},onMouseLeave:t=>{const o=t.currentTarget.querySelector(".title-tooltip");o&&(o.style.opacity="0")},children:e.jsxs("div",{style:{cursor:"default"},children:[e.jsx("h1",{className:"mb-1 lh-1",style:{fontSize:"clamp(1.8rem, 6vw, 2.5rem)",fontWeight:"800",letterSpacing:"-0.03em",whiteSpace:"nowrap"},children:"Orient Way"}),e.jsx("h2",{className:"mb-0 text-muted",style:{fontSize:"clamp(1rem, 3vw, 1.1rem)",fontWeight:"400",letterSpacing:"-0.015em",marginTop:"0.15rem"},children:"a blog by Eliot Zhu"}),e.jsx("small",{className:"text-muted title-tooltip",style:{fontSize:"0.7rem",lineHeight:"1.2",position:"absolute",top:"-1.2rem",left:"0",opacity:"0",transition:"opacity 0.3s ease",pointerEvents:"none",whiteSpace:"nowrap"},children:"to orient: find your bearings · a way: a path you make"})]})}),e.jsx("div",{className:"mb-4",children:e.jsx("ul",{className:"list-unstyled mb-0",style:{fontSize:"0.95rem",lineHeight:"1.6"},children:r.map((t,o)=>e.jsxs("li",{className:"mb-1",children:[e.jsx("span",{className:"text-muted",children:"• "}),e.jsx("a",{href:`#${t.id}`,className:t.linkClass,onClick:d=>{d.preventDefault(),console.log(`Would navigate to: ${t.id}`),alert(`This would be a link to a blog post about: ${t.text}`)},children:t.text}),e.jsx("span",{className:"text-muted",children:t.description})]},o))})}),e.jsxs("div",{className:"d-flex gap-3 mb-4",children:[e.jsx("a",{href:s.github,target:"_blank",rel:"noopener noreferrer",className:"text-reset",style:{fontSize:"1.3rem",transition:"color 0.2s ease"},onMouseEnter:t=>t.target.style.color="#333",onMouseLeave:t=>t.target.style.color="inherit",title:"GitHub",children:e.jsx("i",{className:"bi bi-github"})}),e.jsx("a",{href:s.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-reset",style:{fontSize:"1.3rem",transition:"color 0.2s ease"},onMouseEnter:t=>t.target.style.color="#0077b5",onMouseLeave:t=>t.target.style.color="inherit",title:"LinkedIn",children:e.jsx("i",{className:"bi bi-linkedin"})}),e.jsx("a",{href:s.twitter,target:"_blank",rel:"noopener noreferrer",className:"text-reset",style:{fontSize:"1.3rem",transition:"color 0.2s ease"},onMouseEnter:t=>t.target.style.color="#1da1f2",onMouseLeave:t=>t.target.style.color="inherit",title:"Twitter/X",children:e.jsx("i",{className:"bi bi-twitter-x"})}),e.jsx("a",{href:s.email,className:"text-reset",style:{fontSize:"1.3rem",transition:"color 0.2s ease"},onMouseEnter:t=>t.target.style.color="#6c757d",onMouseLeave:t=>t.target.style.color="inherit",title:"Email",children:e.jsx("i",{className:"bi bi-envelope"})})]})]})}function ie({post:i,theme:r="blue"}){const{theme:s}=h.useContext(T),t=s==="dark",{id:o,title:d,subtitle:l,excerpt:x,coverImage:j,category:c,tags:g=[],publishedAt:C,readTime:v,author:M}=i,z=a=>{if(!a)return"";const m=new Date;return a.getFullYear()===m.getFullYear()?a.toLocaleDateString("en-US",{month:"long",day:"numeric"}):a.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},p=(a=>({travel:"red",tech:"blue",life:"teal",review:"brown",startup:"brown",personal:"blue"})[a]||"blue")(c),N={fontSize:"0.7rem",backgroundColor:t?"rgba(255, 255, 255, 0.2)":"rgba(108, 117, 125, 0.8)",color:"#ffffff",border:t?"1px solid rgba(255, 255, 255, 0.3)":"1px solid rgba(108, 117, 125, 0.9)",fontWeight:"500",backdropFilter:t?"blur(8px)":"none"};return e.jsxs(y,{className:`h-100 shadow-sm border-0 mb-4 card card-${p}`,children:[j&&e.jsx("div",{style:{height:"200px",overflow:"hidden"},children:e.jsx(y.Img,{variant:"top",src:j,alt:d,style:{width:"100%",height:"100%",objectFit:"cover",transition:"transform 0.3s ease"},onMouseEnter:a=>a.target.style.transform="scale(1.05)",onMouseLeave:a=>a.target.style.transform="scale(1)"})}),e.jsxs(y.Body,{className:"d-flex flex-column",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start mb-2",children:[e.jsx("div",{className:"card-date",children:z(C)}),v&&e.jsxs("small",{className:"text-muted",children:[v," min read"]})]}),e.jsx(_,{to:`/blog/${o}`,className:"text-decoration-none text-reset",children:e.jsx(y.Title,{className:"mb-1 card-title",style:{fontSize:"1.2rem",lineHeight:"1.3"},children:d})}),l&&e.jsx("div",{className:"text-muted mb-2",style:{fontSize:"0.9rem",fontWeight:"500"},children:l}),e.jsx(y.Text,{className:"text-muted flex-grow-1",style:{fontSize:"0.85rem",lineHeight:"1.5"},children:x}),g.length>0&&e.jsx("div",{className:"mt-auto pt-2",children:e.jsxs("div",{className:"d-flex flex-wrap gap-1",children:[g.slice(0,3).map((a,m)=>e.jsx(L,{variant:"outline-secondary",className:"border-0",style:N,children:a},m)),g.length>3&&e.jsxs(L,{variant:"outline-secondary",className:"border-0",style:N,children:["+",g.length-3]})]})})]})]})}const k="posts",oe=async i=>{try{return(await Z(A(S,k),{...i,publishedAt:D(),updatedAt:D(),likes:0,views:0,isPublished:i.isPublished!==void 0?i.isPublished:!1})).id}catch(r){throw console.error("Error creating post:",r),r}},ne=async(i=10,r=!0)=>{try{let s;r?s=R(A(S,k),$("isPublished","==",!0)):s=A(S,k);const t=await U(s),o=[];return t.forEach(l=>{o.push({id:l.id,...l.data(),publishedAt:l.data().publishedAt?.toDate(),updatedAt:l.data().updatedAt?.toDate()})}),o.filter(l=>l.publishedAt).sort((l,x)=>x.publishedAt-l.publishedAt).slice(0,i)}catch(s){throw console.error("Error getting posts:",s),s}},K=async i=>{try{const r=Y(S,k,i),s=await G(r);if(s.exists()){const t=s.data();return await X(r,{views:(t.views||0)+1}),{id:s.id,...t,publishedAt:t.publishedAt?.toDate(),updatedAt:t.updatedAt?.toDate(),views:(t.views||0)+1}}else throw new Error("Post not found")}catch(r){throw console.error("Error getting post:",r),r}};function Q(){const{id:i}=F(),r=O(),[s,t]=h.useState(null),[o,d]=h.useState(!0),[l,x]=h.useState(""),{theme:j}=h.useContext(T),c=j==="dark";if(h.useEffect(()=>{i&&(async()=>{try{d(!0);const m=await K(i);t(m)}catch(m){console.error("Error fetching post:",m),x("Post not found or failed to load.")}finally{d(!1)}})()},[i]),o)return e.jsx(P,{className:"py-5",children:e.jsxs("div",{className:"text-center",children:[e.jsx(H,{animation:"border",variant:"primary"}),e.jsx("p",{className:"mt-2 text-muted",children:"Loading post..."})]})});if(l||!s)return e.jsx(P,{className:"py-5",children:e.jsxs(I,{variant:"danger",className:"text-center",children:[e.jsx("h4",{children:"Post Not Found"}),e.jsx("p",{children:l||"The post you are looking for does not exist."}),e.jsx(w,{variant:"primary",onClick:()=>r("/"),children:"Back to Home"})]})});const g=a=>a?a.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"",C=a=>a?a.split(`
`).map((n,u)=>{if(n.startsWith("# "))return e.jsx("h2",{style:{fontSize:"1.75rem",fontWeight:"700",marginTop:u>0?"2rem":"0",marginBottom:"1rem",color:c?"#f8f9fa":"#212529"},children:n.substring(2)},u);if(n.startsWith("## "))return e.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"600",marginTop:"1.5rem",marginBottom:"0.75rem",color:c?"#f8f9fa":"#212529"},children:n.substring(3)},u);if(n.startsWith("### "))return e.jsx("h4",{style:{fontSize:"1.25rem",fontWeight:"600",marginTop:"1.25rem",marginBottom:"0.5rem",color:c?"#f8f9fa":"#212529"},children:n.substring(4)},u);if(n.includes("**")){const E=n.split("**");return e.jsx("p",{style:{marginBottom:"1rem"},children:E.map((f,b)=>b%2===1?e.jsx("strong",{children:f},b):f)},u)}if(n.includes("*")&&!n.includes("**")){const E=n.split("*");return e.jsx("p",{style:{marginBottom:"1rem"},children:E.map((f,b)=>b%2===1?e.jsx("em",{children:f},b):f)},u)}return n.startsWith("- ")?e.jsx("li",{style:{marginBottom:"0.5rem",listStyle:"disc",marginLeft:"1.5rem"},children:n.substring(2)},u):n.trim()===""?e.jsx("br",{},u):e.jsx("p",{style:{marginBottom:"1rem"},children:n},u)}):"",v={fontSize:"1.1rem",lineHeight:"1.7",color:c?"#e9ecef":"#333"},M={fontWeight:"700",lineHeight:"1.2",color:c?"#f8f9fa":"inherit"},z={fontSize:"1.2rem",fontWeight:"400",lineHeight:"1.4",color:c?"#adb5bd":"#6c757d"},W={backgroundColor:c?"rgba(255, 255, 255, 0.1)":"rgba(108, 117, 125, 0.1)",color:c?"#adb5bd":"#6c757d",border:"none",padding:"0.25rem 0.5rem",borderRadius:"0.375rem",fontSize:"0.875rem"},p={color:c?"#adb5bd":"#6c757d"},N={borderColor:c?"#495057":"#dee2e6"};return e.jsx(P,{fluid:!0,style:{maxWidth:"1200px",padding:"1rem"},children:e.jsxs(q,{className:"g-4",children:[e.jsx(B,{lg:4,xl:3,children:e.jsx(J,{})}),e.jsxs(B,{lg:8,xl:9,children:[e.jsx("div",{className:"mb-3",children:e.jsxs(w,{variant:"outline-secondary",size:"sm",onClick:()=>r("/"),className:"d-flex align-items-center gap-2",children:[e.jsx("i",{className:"bi bi-arrow-left"}),"Back to Home"]})}),e.jsxs("article",{children:[e.jsxs("div",{className:"d-flex flex-wrap align-items-center gap-3 mb-3",children:[s.category&&e.jsx(L,{bg:"primary",className:"text-uppercase",children:s.category}),e.jsx("small",{style:p,children:g(s.publishedAt)}),s.readTime&&e.jsxs("small",{style:p,children:[s.readTime," min read"]}),s.views&&e.jsxs("small",{style:p,children:[s.views," views"]})]}),e.jsx("h1",{className:"mb-2",style:M,children:s.title}),s.subtitle&&e.jsx("h2",{className:"mb-4",style:z,children:s.subtitle}),s.coverImage&&e.jsx("div",{className:"mb-4",children:e.jsx("img",{src:s.coverImage,alt:s.title,className:"img-fluid rounded",style:{width:"100%",height:"auto"}})}),e.jsx("div",{className:"mb-4",style:v,children:e.jsx("div",{children:C(s.content)})}),s.tags&&s.tags.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h6",{style:p,className:"mb-2",children:"Tags:"}),e.jsx("div",{className:"d-flex flex-wrap gap-2",children:s.tags.map((a,m)=>e.jsx("span",{style:W,children:a},m))})]}),e.jsxs("div",{className:"d-flex gap-3 py-3 border-top",style:N,children:[e.jsxs(w,{variant:"outline-primary",size:"sm",children:[e.jsx("i",{className:"bi bi-heart me-1"}),"Like ",s.likes>0&&`(${s.likes})`]}),e.jsxs(w,{variant:"outline-secondary",size:"sm",children:[e.jsx("i",{className:"bi bi-share me-1"}),"Share"]})]})]})]})]})})}const le=Object.freeze(Object.defineProperty({__proto__:null,default:Q},Symbol.toStringTag,{value:"Module"}));export{J as A,ie as B,T,ae as a,le as b,oe as c,ne as g};
