import{j as e,C as r,a as c,A as h,b as z,R as E,c as f,B as p,i as v}from"./vendor-bootstrap-C6xIMti8.js";import{r as o}from"./vendor-router-DArSVHJ3.js";import{a as b,k as L,g as H,c as F,i as J,L as Z,m as q,n as K,o as G,p as V,q as Q}from"./auth-Sw-QPVcd.js";import{T as X,u as _,h as ee}from"./blog-CaqybC2x.js";import{a as se,l as te}from"./index-Dr8r4x_O.js";import"./vendor-react-Bzgz95E1.js";import"./vendor-firebase-CYcY3q11.js";const ne=()=>{const[t,i]=o.useState(null),[m,a]=o.useState(!1),g=async()=>{try{a(!0);const s=b.currentUser?.uid;if(!s){i({error:"Not logged in"});return}const[j,I,x,w]=await Promise.all([L(s),H(s),F(s),J(s)]);i({userId:s,userRoles:j,level:I,adminAccess:x,ownerStatus:w,timestamp:new Date().toISOString()})}catch(s){i({error:s.message})}finally{a(!1)}};return o.useEffect(()=>{g()},[]),e.jsxs(r,{children:[e.jsx(r.Header,{children:e.jsx("h5",{children:"Permission Debug Tool"})}),e.jsxs(r.Body,{children:[e.jsx(c,{onClick:g,disabled:m,className:"mb-3",children:m?"Checking...":"Refresh Debug Info"}),t&&e.jsx("div",{children:t.error?e.jsxs(h,{variant:"danger",children:["Error: ",t.error]}):e.jsxs("div",{children:[e.jsx(h,{variant:"info",children:e.jsxs("strong",{children:["Debug Info (Last checked: ",new Date(t.timestamp).toLocaleTimeString(),")"]})}),e.jsxs("div",{className:"mb-3",children:[e.jsx("strong",{children:"User ID:"})," ",t.userId]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("strong",{children:"Level:"})," ",t.level]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("strong",{children:"Can Access Admin:"})," ",t.adminAccess?"YES":"NO"]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("strong",{children:"Is Owner:"})," ",t.ownerStatus?"YES":"NO"]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("strong",{children:["User Roles (",t.userRoles.length,"):"]}),e.jsx("ul",{children:t.userRoles.map((s,j)=>e.jsxs("li",{children:[s.roleId," - Level: ",s.role?.level," - Name: ",s.role?.name,e.jsx("br",{}),"Permissions: ",s.role?.permissions?.join(", ")]},j))})]})]})})]})]})};function he(){const[t,i]=o.useState(!1),[m,a]=o.useState(""),[g,s]=o.useState(""),[j,I]=o.useState(""),[x,w]=o.useState(null),{isLoggedIn:l,user:D}=o.useContext(Z),{theme:P}=o.useContext(X),{level:T,isOwner:N,isAdmin:S,canAccessAdmin:C}=_(),k=P==="dark",B=te(T),R=se(B),A=async()=>{try{if(i(!0),s(""),!l){s("You must be logged in to check roles");return}const n=b.currentUser?.uid,d=await L(n);w(d);const y=d.length;a(`Found ${y} role${y===1?"":"s"} for current user`)}catch(n){s(`Error checking roles: ${n.message}`)}finally{i(!1)}},O=async()=>{try{i(!0),a(""),s(""),await q(),a("Default roles created successfully! (owner, admin, author, user, guest)")}catch(n){s(`Error initializing roles: ${n.message}`)}finally{i(!1)}},U=async()=>{try{if(i(!0),a(""),s(""),!l){s("You must be logged in to assign owner role");return}await K(),a(`Owner role assigned exclusively to ${D?.email||"current user"}! All previous roles removed.`),setTimeout(()=>{A(),window.location.reload()},1e3)}catch(n){s(`Error assigning owner role: ${n.message}`)}finally{i(!1)}},Y=async()=>{try{if(i(!0),a(""),s(""),!l){s("You must be logged in to reset roles");return}const n=b.currentUser?.uid;await G(n),await V(n,"user","system-reset"),a("Your roles have been reset to default User level."),setTimeout(()=>{A(),window.location.reload()},1e3)}catch(n){s(`Error resetting roles: ${n.message}`)}finally{i(!1)}},W=async()=>{try{if(i(!0),a(""),s(""),!l){s("You must be logged in");return}const n=b.currentUser?.uid;await Q(n),a("Default user role assigned successfully!")}catch(n){s(`Error assigning default role: ${n.message}`)}finally{i(!1)}},M=async()=>{try{i(!0),a(""),s("");const n=[{title:"Welcome to Orient Way",subtitle:"A journey begins with a single step",content:`# Welcome to Orient Way

This is the beginning of a new adventure in digital storytelling. Orient Way is where I document my journeys, both physical and digital.

## What You'll Find Here

- **Travel Stories**: Adventures from around the world
- **Tech Insights**: Lessons learned in the startup world
- **Life Reflections**: Thoughts on growth and change
- **Cultural Observations**: Perspectives from different places

## The Journey Ahead

Stay tuned for stories about raising funding, walking across continents, living in South America, and building technology that matters.

*Every journey starts with a single step, and this is ours.*`,excerpt:"Welcome to Orient Way - where travel meets technology and stories come alive.",category:"Life",tags:["welcome","introduction","travel","technology"],slug:"welcome-to-orient-way",status:"published",author:"Eliot Zhu",coverImage:"https://images.unsplash.com/photo-1469474968028-56623f02e42e?w=800"},{title:"Building in Public: The Startup Journey",subtitle:"Lessons from the entrepreneurial trenches",content:`# Building in Public: The Startup Journey

## The Beginning

Starting a company is like jumping off a cliff and building a plane on the way down. Here's what I learned along the way.

### Lesson 1: Validation is Everything

Before writing a single line of code, make sure people actually want what you're building.

### Lesson 2: Team is Everything

The right co-founder can make all the difference. Choose wisely.

### Lesson 3: Persistence Pays

Some days you'll want to quit. Those are the days that define you.

## The Road Ahead

Building something meaningful takes time, patience, and a lot of coffee.`,excerpt:"Reflections on the startup journey, from idea to execution and everything in between.",category:"Business",tags:["startup","entrepreneurship","lessons","building"],slug:"building-in-public-startup-journey",status:"draft",author:"Eliot Zhu"},{title:"The Art of Slow Travel",subtitle:"Why rushing misses the point",content:`# The Art of Slow Travel

## Moving Slowly

In a world obsessed with efficiency, slow travel is a radical act.

When you slow down, you notice things:
- The way morning light hits a plaza
- How locals interact with each other  
- The rhythm of a place

## Lessons from the Road

Every place has stories to tell, but only if you're willing to listen.

### South America Taught Me

- Time moves differently in different places
- Patience is a superpower
- The best conversations happen in unexpected places

*Some places shape you so fundamentally that you carry them with you wherever you go.*`,excerpt:"Reflections on the beauty and importance of taking your time while traveling.",category:"Travel",tags:["travel","philosophy","slow-living","south-america"],slug:"art-of-slow-travel",status:"published",author:"Eliot Zhu",coverImage:"https://images.unsplash.com/photo-1488646953014-85cb44e25828?w=800"}],d=[];for(const y of n){const $=await ee({...y,readTime:Math.ceil(y.content.split(" ").length/200)});d.push($)}a(`Successfully created ${d.length} sample blog posts!`)}catch(n){s(`Error creating sample posts: ${n.message}`)}finally{i(!1)}},u={backgroundColor:k?"#1f2937":"#fff",borderColor:k?"#374151":"#dee2e6"};return e.jsxs(z,{fluid:!0,style:{maxWidth:"1400px",padding:"2rem 1rem"},children:[e.jsx(E,{className:"mb-4",children:e.jsx(f,{children:e.jsx("div",{className:"d-flex justify-content-between align-items-center",children:e.jsxs("div",{children:[e.jsx("h2",{className:"mb-1",children:"System Setup"}),e.jsx("p",{className:"text-muted mb-0",children:"Initialize your blog system and configure permissions"})]})})})}),m&&e.jsx(h,{variant:"success",onClose:()=>a(""),dismissible:!0,children:m}),g&&e.jsx(h,{variant:"danger",onClose:()=>s(""),dismissible:!0,children:g}),e.jsxs(E,{className:"g-4",children:[e.jsx(f,{md:6,children:e.jsxs(r,{style:u,children:[e.jsx(r.Header,{children:e.jsx("h5",{className:"mb-0",children:"Role System Setup"})}),e.jsxs(r.Body,{children:[e.jsx("p",{className:"text-muted",children:"Initialize and manage core role settings."}),e.jsxs("div",{className:"d-grid gap-2",children:[R&&e.jsx(c,{variant:"primary",onClick:O,disabled:t,children:t?"Initializing...":"Initialize Roles"}),e.jsx(c,{variant:"outline-secondary",onClick:W,disabled:t||!l,children:t?"Assigning...":"Assign Default Role"}),e.jsx(c,{variant:"outline-secondary",onClick:A,disabled:t||!l,children:t?"Checking...":"Check My Roles"}),R&&e.jsx(c,{variant:"outline-secondary",onClick:Y,disabled:t||!l,children:t?"Resetting...":"Reset to User Role"}),e.jsx(c,{variant:"outline-secondary",onClick:()=>window.location.reload(),disabled:t,children:"Refresh Page"})]}),!l&&e.jsx(h,{variant:"info",className:"mt-3 mb-0",children:"Please log in to assign roles to your account."}),l&&e.jsx(r,{className:"mt-3",style:u,children:e.jsx(r.Body,{className:"py-2",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("strong",{className:"me-3",children:"Current Status"}),e.jsxs("div",{className:"text-muted small",children:[e.jsxs(p,{bg:"secondary",className:"me-2",children:["Level: ",T]}),e.jsxs(p,{bg:N?"danger":"light",text:N?void 0:"dark",className:"me-2",children:["Owner: ",N?"Yes":"No"]}),e.jsxs(p,{bg:S?"warning":"light",text:S?void 0:"dark",className:"me-2",children:["Admin: ",S?"Yes":"No"]}),e.jsxs(p,{bg:C?"success":"light",text:C?void 0:"dark",children:["Admin Access: ",C?"Yes":"No"]})]})]})})}),x&&e.jsx(r,{className:"mt-3",style:u,children:e.jsxs(r.Body,{className:"py-2 small text-muted",children:[e.jsx("strong",{children:"Your Roles:"}),e.jsx("div",{className:"mt-1",children:x.length===0?"No roles assigned":x.map((n,d)=>e.jsxs("div",{children:["- ",n.role?.name||n.roleId," (Level: ",n.role?.level,")"]},d))})]})})]})]})}),e.jsx(f,{md:6,children:e.jsxs(r,{style:u,children:[e.jsx(r.Header,{children:e.jsx("h5",{className:"mb-0",children:"Sample Content"})}),e.jsxs(r.Body,{children:[e.jsx("p",{className:"text-muted",children:"Create example posts to test site behavior."}),e.jsx("div",{className:"d-grid gap-2",children:e.jsx(c,{variant:"primary",onClick:M,disabled:t||!l,children:t?"Creating...":"Create Sample Posts"})}),!l&&e.jsx(h,{variant:"info",className:"mt-3 mb-0",children:"Please log in to create sample content."})]})]})}),e.jsx(f,{md:12,children:e.jsx(v,{defaultActiveKey:null,children:e.jsxs(v.Item,{eventKey:"0",children:[e.jsx(v.Header,{children:"Advanced / Debug Tools"}),e.jsxs(v.Body,{children:[e.jsxs(r,{style:u,className:"mb-3",children:[e.jsx(r.Header,{children:e.jsx("h6",{className:"mb-0",children:"Manual Setup Instructions"})}),e.jsxs(r.Body,{children:[e.jsx("h6",{children:"Firestore Console Setup (Alternative Method)"}),e.jsx("p",{className:"text-muted",children:"If you prefer to set up manually through the Firestore console:"}),e.jsxs("ol",{className:"text-muted",children:[e.jsx("li",{children:"Go to your Firebase Console â†’ Firestore Database"}),e.jsxs("li",{children:["Create a new collection called ",e.jsx("code",{children:"userRoles"})]}),e.jsxs("li",{children:["Add a document with these fields:",e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("code",{children:"userId"}),": Your Firebase Auth UID"]}),e.jsxs("li",{children:[e.jsx("code",{children:"roleId"}),': "owner"']}),e.jsxs("li",{children:[e.jsx("code",{children:"assignedBy"}),': "manual"']}),e.jsxs("li",{children:[e.jsx("code",{children:"assignedAt"}),": Current timestamp"]})]})]}),e.jsx("li",{children:'Click "Initialize Roles" above to create the role definitions'})]}),e.jsxs(h,{variant:"warning",children:[e.jsx("strong",{children:"Important:"})," Only assign the owner role to trusted administrators. The owner role has full system access and cannot be restricted."]})]})]}),e.jsxs(r,{style:u,className:"mb-3",children:[e.jsx(r.Header,{children:e.jsx("h6",{className:"mb-0",children:"Permission Debug Tool"})}),e.jsx(r.Body,{children:e.jsx(ne,{})})]}),e.jsx("div",{className:"text-end",children:R&&e.jsx(c,{variant:"outline-danger",onClick:U,disabled:t||!l,children:t?"Assigning...":"Make Me Owner (Exclusive)"})})]})]})})})]})]})}export{he as default};
